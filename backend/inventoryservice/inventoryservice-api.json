{
  "service": "productservice",
  "api_name": "Orders API",
  "version": "1.0",
  "endpoints": [
    {
      "path": "/orders",
      "method": "POST",
      "description": "Create a new order. The request body should contain a list of items with product_id and quantity.",
      "authentication": "Required (any authenticated user)",
      "request_body": {
        "items": [
          {
            "product_id": "integer",
            "quantity": "integer"
          }
        ]
      },
      "response": {
        "description": "The created order with its items.",
        "body": {
          "id": "integer",
          "user_id": "integer",
          "total_price": "float",
          "status": "string (pending, completed, cancelled)",
          "created_at": "timestamp",
          "items": [
            {
              "id": "integer",
              "order_id": "integer",
              "product_id": "integer",
              "quantity": "integer",
              "price_at_time_of_purchase": "float"
            }
          ]
        }
      }
    },
    {
      "path": "/orders",
      "method": "GET",
      "description": "Get all orders for the authenticated user.",
      "authentication": "Required (any authenticated user)",
      "response": {
        "description": "A list of orders.",
        "body": [
          {
            "id": "integer",
            "user_id": "integer",
            "total_price": "float",
            "status": "string (pending, completed, cancelled)",
            "created_at": "timestamp"
          }
        ]
      }
    },
    {
      "path": "/orders/:id",
      "method": "GET",
      "description": "Get the details of a specific order belonging to the authenticated user.",
      "authentication": "Required (any authenticated user)",
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "description": "The ID of the order to retrieve.",
          "required": true,
          "schema": {
            "type": "integer"
          }
        }
      ],
      "response": {
        "description": "The order with its items.",
        "body": {
          "id": "integer",
          "user_id": "integer",
          "total_price": "float",
          "status": "string (pending, completed, cancelled)",
          "created_at": "timestamp",
          "items": [
            {
              "id": "integer",
              "order_id": "integer",
              "product_id": "integer",
              "quantity": "integer",
              "price_at_time_of_purchase": "float"
            }
          ]
        }
      }
    },
    {
      "path": "/admin/orders",
      "method": "GET",
      "description": "Get all orders in the system. Admin only.",
      "authentication": "Required (admin role)",
      "response": {
        "description": "A list of all orders.",
        "body": [
          {
            "id": "integer",
            "user_id": "integer",
            "total_price": "float",
            "status": "string (pending, completed, cancelled)",
            "created_at": "timestamp"
          }
        ]
      }
    }
  ]
}
